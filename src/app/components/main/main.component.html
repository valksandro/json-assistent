<div class="container">
    <app-search-json (onSetfields)="onSetFields($event)" (onFileUpload)="onFileUpload($event)" [(fields)]="fields">
    </app-search-json>

    <div class="row">
        <div class="table-responsive" *ngIf="file" style="max-height: 300px; margin-bottom: 50px">
            <table class="table table-bordered table-striped table-sm mt-4 ">
                <thead>
                    <tr>
                        <th style="min-width: 120px;">Nome</th>
                        <th style="min-width: 120px;">Tipo</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody *ngIf="file">
                    <tr *ngFor="let field of file.fields" style="cursor: pointer;" 
                    (click)="selectField(field)"
                    (dblclick)="addField()"
                        [class.selected-row]="fieldSelected == field">
                        <td>{{field.fieldName}}</td>
                        <td>{{field['type']}}</td>
                        <td></td>
                    </tr>
                    <tr *ngIf="file.fields.length == 0">
                        <td colspan="3" align="center">
                            Nenhum campo neste arquivo
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>


    <div class="row"  *ngIf="fieldSelected">
        <div class="table-responsive" style="max-height: 300px; margin-bottom: 50px">
            <table class="table table-bordered table-striped table-sm mt-4 ">
                <thead>
                    <tr>
                        <th style="min-width: 120px;">Propriedade</th>
                        <th style="min-width: 120px;">Valor</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let property of fieldSelected | keyvalue: originalOrder" style="cursor: pointer;">
                        <td>{{property.key}}</td>
                        <td><input type="text" [value]="property.value" (change)="changeValue(property, $event)"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="row" *ngIf="fieldSelected">
        <a class="btn btn-success" (click)="generateJson()" >Salvar</a>
        <a *ngIf="downloadJsonHref" class="btn btn-success" id="download" title="Download JSON" [href]="downloadJsonHref"
            download="download.json">Download</a>
    </div>

</div>